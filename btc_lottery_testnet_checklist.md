# 📝 비트코인 추첨/정산 서비스 테스트넷 배포 체크리스트

---

## 1. **기초 준비**

- [ ] 테스트넷 비트코인 지갑 준비 (운영자/참가자 주소)
- [ ] Blockstream 등 테스트넷 API 연동 확인
- [ ] .env 등 환경변수에 테스트넷 주소/엔드포인트로 세팅

---

## 2. **DB 및 서버 환경**

- [ ] DB 초기화(테스트넷용 DB 별도 권장)
- [ ] 최신 models.py 기준 DB 스키마 반영(마이그레이션 포함)
- [ ] 서버/백엔드 Flask 등 환경에서 테스트넷용 설정 적용

---

## 3. **입금 감시(Deposit Monitor)**

- [ ] 테스트넷 주소 입금시 감지 및 참가자 등록(Participant) DB 반영
- [ ] 컨펌수(CONFIRMATIONS) 테스트

---

## 4. **라운드 관리**

- [ ] 라운드 생성/진행/마감 정상 동작(참가 10명 도달 → 자동 마감)
- [ ] 라운드 상태(open/closed/payout_done) 변화 확인
- [ ] 당첨자 선정 및 블록해시 추첨 로직 정상 동작

---

## 5. **정산 트랜잭션 생성**

- [ ] 마감시 payout/fee 트랜잭션 DB 기록 확인
- [ ] 트랜잭션에 round_id, amount, address 등 값 정확히 입력되는지 확인

---

## 6. **출금 감시 및 정산 마감**

- [ ] 운영자/관리자가 테스트넷에서 실제 출금(PAYOUT/FEE 대상 주소로 송금)
- [ ] payout_confirm_monitor(또는 payout_monitor.py)로 송금 트랜잭션 감지 확인
- [ ] 트랜잭션 status 'pending' → 'confirmed' 자동 갱신 확인
- [ ] payout/fee 모두 confirmed 시 라운드 status 'payout_done' 자동 변경 확인

---

## 7. **관리자/참가자 페이지 및 로그**

- [ ] 관리자 페이지에서 라운드별 상태, 트랜잭션 현황 정상 확인
- [ ] 각 단계별 로그/에러 메시지 명확하게 출력되는지 확인

---

## 8. **예외/실패 케이스 테스트**

- [ ] 잘못된 금액 입금, 중복 입금, 운영자 미송금 등 예외 처리 및 안내 동작 확인
- [ ] Blockstream 등 API 장애 시 graceful fallback 확인

---

## 9. **테스트넷 BTC 입금/출금 반복 시나리오**

- [ ] 여러 라운드 연달아 진행시 문제 없는지 확인
- [ ] 라운드/참가자/트랜잭션 데이터 저장 및 표시 정상 동작

---

## 10. **최종 마감 후 정리**

- [ ] payout_done 이후 라운드/트랜잭션이 변경 불가/읽기전용 상태로 되는지 확인
- [ ] 참가자/운영자용 결과 알림(수동/자동) 체크

---

## ⏱️ **운영/자동화 관련(선택)**

- [ ] 라운드/트랜잭션 별 감사 로그 및 변경 이력 남기는지 확인
- [ ] 자동화 스크립트(cron, systemd 등)로 실서비스와 동일하게 동작하는지 확인
- [ ] DB 백업 및 복구 시나리오 테스트

---
